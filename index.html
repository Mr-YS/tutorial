<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>tutorial</title>
    <style>
      #circle {
        position: absolute;
        top: 50vh;
        left: 50vw;
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: red;
        margin-top: -50px;
        margin-left:-50px;
      }

      #box {
        position: absolute;
        top: 50vh;
        left: 50vw;
        width: 1400px;
        height: 700px;
        border-radius: 25px;
        margin-top: -350px;
        margin-left: -700px;
        border-style: dashed;
        border-width: 10px;
        border-color: gray;
        box-sizing: border-box;
      }
    </style>
  </head>
  <body onkeydown="key(true); color();" onkeyup="key(false);">
    <div id="circle"></div>
    <div id="box"></div>

    <script>
      var circleStyle = document.getElementById('circle').style;

      var left = false, right = false, up = false, down = false;
      function key(state) {
        switch (event.keyCode) {
        case 65: left = state; break; // A
        case 68: right = state; break; // D
        case 87: up = state; break; // W
        case 83: down = state; break; // S
        case 27: window.close(); break; // ESC
        }
      }

      function color() {
        // Return if key is not 'E'
        if (event.keyCode != 69) { return; }

        var colors = [ 'red', 'orange', 'blue', 'cyan', 'yellowgreen' ];
        var i = Math.floor(Math.random() * 5)
        circleStyle.background = colors[i];
      }

      var x = 0, y = 0;
      setInterval(function() {
        if (left) { x -= 4; }
        if (right) { x += 4; }
        if (up) { y -= 4; }
        if (down) { y += 4; }

        if (650 < x) { x = 650; }
        if (-650 > x) { x = -650; }
        if (300 < y) { y = 300; }
        if (-300 > y) { y = -300; }
        circleStyle.marginLeft = (x - 50) + 'px';
        circleStyle.marginTop = (y - 50) + 'px';
      }, 16);
    </script>
  </body>
</html>
